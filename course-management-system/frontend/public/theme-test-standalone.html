<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹¬ç«‹ä¸»é¢˜æµ‹è¯•é¡µé¢</title>
    <style>
        :root {
            /* é»˜è®¤CSSå˜é‡ */
            --color-primary: #1890ff;
            --color-secondary: #52c41a;
            --color-tertiary: #faad14;
            --color-accent: #f5222d;
            --color-neutral: #8c8c8c;
            --radius-md: 8px;
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section h3 {
            color: white;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .theme-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .theme-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            text-align: center;
        }
        
        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .theme-btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .color-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .color-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }
        
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin: 0 auto 8px;
        }
        
        .color-label {
            color: white;
            font-size: 12px;
            font-family: monospace;
        }
        
        .test-area {
            margin-top: 20px;
        }
        
        .test-card {
            background: var(--color-primary);
            color: white;
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 10px;
            box-shadow: var(--shadow-md);
        }
        
        .test-card.secondary {
            background: var(--color-secondary);
        }
        
        .test-card.accent {
            background: var(--color-accent);
        }
        
        .status {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 12px;
            color: #ccc;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ ç‹¬ç«‹ä¸»é¢˜æµ‹è¯•é¡µé¢</h1>
        
        <div class="section">
            <h3>ğŸ“Š å½“å‰ä¸»é¢˜çŠ¶æ€</h3>
            <div id="current-theme-info">
                <p style="color: white;">ç±»åˆ«: <span id="current-category">æœªçŸ¥</span></p>
                <p style="color: white;">ä¸»é¢˜é”®: <span id="current-key">æœªçŸ¥</span></p>
                <p style="color: white;">æ¨¡å¼: <span id="current-mode">æœªçŸ¥</span></p>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ¯ è«å¥ˆä¸»é¢˜</h3>
            <div class="theme-buttons">
                <button class="theme-btn" onclick="setTheme('monet', 'a')">æ¸…æ™¨æ¹–ç•”</button>
                <button class="theme-btn" onclick="setTheme('monet', 'b')">æ™¨æ›¦èŠ±å›­</button>
                <button class="theme-btn" onclick="setTheme('monet', 'c')">æµ·é£è–°è¡£è‰</button>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ¨ è«å…°è¿ªä¸»é¢˜</h3>
            <div class="theme-buttons">
                <button class="theme-btn" onclick="setTheme('morandi', 'a')">å²©çŸ³ä¸è‹”</button>
                <button class="theme-btn" onclick="setTheme('morandi', 'b')">ç‡•éº¦ä¸çŸ³å¢¨</button>
                <button class="theme-btn" onclick="setTheme('morandi', 'c')">é™¶ç“·ä¸ç°çƒ¬</button>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ”§ æ¨¡å¼åˆ‡æ¢</h3>
            <div class="theme-buttons">
                <button class="theme-btn" onclick="toggleMode()">åˆ‡æ¢æ˜æš—æ¨¡å¼</button>
                <button class="theme-btn" onclick="generateRandomTheme()">éšæœºä¸»é¢˜</button>
                <button class="theme-btn" onclick="clearThemeCache()">æ¸…é™¤ç¼“å­˜</button>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ¨ é¢œè‰²é¢„è§ˆ</h3>
            <div class="color-display">
                <div class="color-item">
                    <div class="color-swatch" id="primary-swatch"></div>
                    <div class="color-label">Primary</div>
                </div>
                <div class="color-item">
                    <div class="color-swatch" id="secondary-swatch"></div>
                    <div class="color-label">Secondary</div>
                </div>
                <div class="color-item">
                    <div class="color-swatch" id="accent-swatch"></div>
                    <div class="color-label">Accent</div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ§ª æ•ˆæœæµ‹è¯•</h3>
            <div class="test-area">
                <div class="test-card">ä¸»è‰²æµ‹è¯•å¡ç‰‡</div>
                <div class="test-card secondary">è¾…è‰²æµ‹è¯•å¡ç‰‡</div>
                <div class="test-card accent">å¼ºè°ƒè‰²æµ‹è¯•å¡ç‰‡</div>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ“ è°ƒè¯•ä¿¡æ¯</h3>
            <div id="debug-status" class="status">ç­‰å¾…æ“ä½œ...</div>
        </div>
    </div>

    <script>
        // ä¸»é¢˜æ•°æ®
        const themes = {
            monet: {
                a: { name: 'æ¸…æ™¨æ¹–ç•”', primary: '#A9D6E5', secondary: '#89C2D9', tertiary: '#B8E0D2', accent: '#D6EAF8', neutral: '#E9ECEF' },
                b: { name: 'æ™¨æ›¦èŠ±å›­', primary: '#E9C46A', secondary: '#F4A261', tertiary: '#E76F51', accent: '#2A9D8F', neutral: '#264653' },
                c: { name: 'æµ·é£è–°è¡£è‰', primary: '#B19CD9', secondary: '#C9A9DD', tertiary: '#FFB3BA', accent: '#BFDBF7', neutral: '#E9ECEF' }
            },
            morandi: {
                a: { name: 'å²©çŸ³ä¸è‹”', primary: '#A3B18A', secondary: '#CFC9C2', tertiary: '#CDB4BD', accent: '#B7B7A4', neutral: '#E9ECEF' },
                b: { name: 'ç‡•éº¦ä¸çŸ³å¢¨', primary: '#D4A574', secondary: '#C9ADA7', tertiary: '#A8DADC', accent: '#457B9D', neutral: '#1D3557' },
                c: { name: 'é™¶ç“·ä¸ç°çƒ¬', primary: '#C8B8B0', secondary: '#D4C5B9', tertiary: '#B8A99A', accent: '#8D7B68', neutral: '#6B5B73' }
            }
        };
        
        let currentTheme = { category: 'monet', key: 'a', mode: 'light' };
        
        // æ—¥å¿—å‡½æ•°
        function log(message) {
            const status = document.getElementById('debug-status');
            const timestamp = new Date().toLocaleTimeString();
            status.innerHTML += `[${timestamp}] ${message}\n`;
            status.scrollTop = status.scrollHeight;
            console.log(message);
        }
        
        // åº”ç”¨ä¸»é¢˜
        function applyTheme(category, key, mode = 'light') {
            log(`åº”ç”¨ä¸»é¢˜: ${category} - ${key} (${mode})`);
            
            const theme = themes[category][key];
            if (!theme) {
                log(`é”™è¯¯: æ‰¾ä¸åˆ°ä¸»é¢˜ ${category} - ${key}`);
                return;
            }
            
            // è®¾ç½®CSSå˜é‡
            const root = document.documentElement;
            root.style.setProperty('--color-primary', theme.primary);
            root.style.setProperty('--color-secondary', theme.secondary);
            root.style.setProperty('--color-tertiary', theme.tertiary);
            root.style.setProperty('--color-accent', theme.accent);
            root.style.setProperty('--color-neutral', theme.neutral);
            
            // è®¾ç½®dataå±æ€§
            root.setAttribute('data-theme-category', category);
            root.setAttribute('data-theme-key', key);
            root.setAttribute('data-theme-mode', mode);
            
            // æ›´æ–°å½“å‰ä¸»é¢˜
            currentTheme = { category, key, mode };
            
            // ä¿å­˜åˆ°localStorage
            try {
                localStorage.setItem('ui-theme-v2', JSON.stringify(currentTheme));
                log(`ä¸»é¢˜å·²ä¿å­˜åˆ°localStorage`);
            } catch (error) {
                log(`ä¿å­˜ä¸»é¢˜å¤±è´¥: ${error.message}`);
            }
            
            // æ›´æ–°UI
            updateUI();
            log(`ä¸»é¢˜åº”ç”¨æˆåŠŸ: ${theme.name}`);
        }
        
        // è®¾ç½®ä¸»é¢˜
        function setTheme(category, key) {
            applyTheme(category, key, currentTheme.mode);
        }
        
        // åˆ‡æ¢æ¨¡å¼
        function toggleMode() {
            const newMode = currentTheme.mode === 'light' ? 'dark' : 'light';
            applyTheme(currentTheme.category, currentTheme.key, newMode);
        }
        
        // ç”Ÿæˆéšæœºä¸»é¢˜
        function generateRandomTheme() {
            const categories = ['monet', 'morandi'];
            const keys = ['a', 'b', 'c'];
            const modes = ['light', 'dark'];
            
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            const randomKey = keys[Math.floor(Math.random() * keys.length)];
            const randomMode = modes[Math.floor(Math.random() * modes.length)];
            
            log(`ç”Ÿæˆéšæœºä¸»é¢˜: ${randomCategory} - ${randomKey} (${randomMode})`);
            applyTheme(randomCategory, randomKey, randomMode);
        }
        
        // æ¸…é™¤ç¼“å­˜
        function clearThemeCache() {
            localStorage.removeItem('ui-theme-v2');
            log('ä¸»é¢˜ç¼“å­˜å·²æ¸…é™¤');
        }
        
        // æ›´æ–°UI
        function updateUI() {
            // æ›´æ–°ä¸»é¢˜ä¿¡æ¯
            document.getElementById('current-category').textContent = currentTheme.category;
            document.getElementById('current-key').textContent = currentTheme.key;
            document.getElementById('current-mode').textContent = currentTheme.mode;
            
            // æ›´æ–°é¢œè‰²é¢„è§ˆ
            const theme = themes[currentTheme.category][currentTheme.key];
            document.getElementById('primary-swatch').style.backgroundColor = theme.primary;
            document.getElementById('secondary-swatch').style.backgroundColor = theme.secondary;
            document.getElementById('accent-swatch').style.backgroundColor = theme.accent;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
        }
        
        // åˆå§‹åŒ–
        function init() {
            log('åˆå§‹åŒ–ç‹¬ç«‹ä¸»é¢˜æµ‹è¯•é¡µé¢...');
            
            // å°è¯•ä»localStorageåŠ è½½ä¸»é¢˜
            try {
                const saved = localStorage.getItem('ui-theme-v2');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    currentTheme = parsed;
                    log(`ä»localStorageåŠ è½½ä¸»é¢˜: ${JSON.stringify(parsed)}`);
                } else {
                    log('æœªæ‰¾åˆ°ä¿å­˜çš„ä¸»é¢˜ï¼Œä½¿ç”¨é»˜è®¤ä¸»é¢˜');
                }
            } catch (error) {
                log(`åŠ è½½ä¸»é¢˜å¤±è´¥: ${error.message}`);
            }
            
            // åº”ç”¨å½“å‰ä¸»é¢˜
            applyTheme(currentTheme.category, currentTheme.key, currentTheme.mode);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>
