# æ ¡å›­è¯¾ç¨‹è¡¨ç®¡ç†ç³»ç»Ÿ - æµ‹è¯•æ•°æ®ç”Ÿæˆæ¨¡å—

è¿™ä¸ªæ¨¡å—ç”¨äºç”Ÿæˆæ ¡å›­è¯¾ç¨‹è¡¨ç®¡ç†ç³»ç»Ÿçš„å¤§è§„æ¨¡ã€çœŸå®ã€å¤æ‚çš„æµ‹è¯•æ•°æ®ï¼Œä¸“é—¨ç”¨äºéªŒè¯æ™ºèƒ½æ’è¯¾ç®—æ³•çš„æœ‰æ•ˆæ€§ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **å¤§è§„æ¨¡æ•°æ®ç”Ÿæˆ**: æ”¯æŒå¤§å‹é«˜æ ¡è§„æ¨¡çš„æ•°æ®é‡
- **çœŸå®æ€§**: ä½¿ç”¨çœŸå®çš„ä¸­æ–‡å§“åã€é™¢ç³»ä¸“ä¸šåç§°
- **å¤æ‚æ€§**: åŒ…å«å„ç§çº¦æŸæ¡ä»¶å’Œå†²çªåœºæ™¯
- **å¤šæ ·æ€§**: è¦†ç›–ä¸åŒç±»å‹çš„è¯¾ç¨‹å’Œç”¨æˆ·åœºæ™¯
- **å®Œæ•´æ€§**: è‡ªåŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§
- **å¤šæ ¼å¼å¯¼å‡º**: æ”¯æŒJSONã€SQLç­‰å¤šç§æ ¼å¼

## ğŸ“Š æ•°æ®è§„æ¨¡

| è§„æ¨¡ | å­¦ç”Ÿæ•° | æ•™å¸ˆæ•° | è¯¾ç¨‹æ•° | æ•™å®¤æ•° | é™¢ç³»æ•° | ä¸“ä¸šæ•° |
|------|--------|--------|--------|--------|--------|--------|
| å¤§å‹ | 25,000 | 1,500  | 3,000  | 300    | 20     | 80     |
| ä¸­å‹ | 12,000 | 800    | 1,500  | 150    | 12     | 40     |
| å°å‹ | 5,000  | 300    | 600    | 60     | 6      | 20     |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
cd data-generator
pip install -r requirements.txt
```

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# ç”Ÿæˆä¸­ç­‰è§„æ¨¡æ•°æ®ï¼ˆé»˜è®¤ï¼‰
python main.py

# ç”Ÿæˆå¤§è§„æ¨¡æ•°æ®ï¼Œè¾“å‡ºJSONå’ŒSQLæ ¼å¼
python main.py --scale large --format json sql

# ç”Ÿæˆå°è§„æ¨¡æ•°æ®åˆ°æŒ‡å®šç›®å½•
python main.py --scale small --output-dir ./test_data

# è·³è¿‡æ•°æ®éªŒè¯ï¼ˆåŠ å¿«ç”Ÿæˆé€Ÿåº¦ï¼‰
python main.py --scale medium --no-validate

# ä¸ç”Ÿæˆå†²çªåœºæ™¯æ•°æ®
python main.py --scale small --no-conflicts

# é™é»˜æ¨¡å¼
python main.py --scale large --quiet
```

### Python APIä½¿ç”¨

```python
from data_generator import generate_complete_dataset

# åŸºæœ¬ç”¨æ³•
dataset = generate_complete_dataset('medium')

# é«˜çº§ç”¨æ³•
dataset = generate_complete_dataset(
    scale='large',
    output_formats=['json', 'sql'],
    output_dir='./my_data',
    validate_data=True,
    include_conflicts=True
)

# è®¿é—®ç”Ÿæˆçš„æ•°æ®
print(f"ç”Ÿæˆäº† {len(dataset['students'])} åå­¦ç”Ÿ")
print(f"ç”Ÿæˆäº† {len(dataset['courses'])} é—¨è¯¾ç¨‹")
print(f"ç”Ÿæˆäº† {len(dataset['conflicts'])} ä¸ªå†²çªåœºæ™¯")
```

## ğŸ“ ç›®å½•ç»“æ„

```
data-generator/
â”œâ”€â”€ __init__.py                 # æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ config.py                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py                     # ä¸»ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ requirements.txt            # ä¾èµ–åŒ…
â”œâ”€â”€ README.md                   # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ generators/                 # æ•°æ®ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ department.py           # é™¢ç³»ä¸“ä¸šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ user.py                 # ç”¨æˆ·æ•°æ®ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ course.py               # è¯¾ç¨‹æ•°æ®ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ facility.py             # è®¾æ–½æ—¶é—´ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ scenario.py             # å¤æ‚åœºæ™¯ç”Ÿæˆå™¨
â”‚   â””â”€â”€ exporter.py             # æ•°æ®å¯¼å‡ºå™¨
â”œâ”€â”€ fixtures/                   # å›ºå®šæ•°æ®å’Œæ¨¡æ¿
â”œâ”€â”€ tests/                      # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_generators.py      # ç”Ÿæˆå™¨æµ‹è¯•
â”‚   â””â”€â”€ test_data_quality.py    # æ•°æ®è´¨é‡æµ‹è¯•
â””â”€â”€ output/                     # è¾“å‡ºç›®å½•
    â”œâ”€â”€ json/                   # JSONæ ¼å¼è¾“å‡º
    â”œâ”€â”€ sql/                    # SQLæ ¼å¼è¾“å‡º
    â””â”€â”€ reports/                # æ•°æ®æŠ¥å‘Š
```

## ğŸ”§ ç”Ÿæˆå™¨æ¨¡å—

### 1. é™¢ç³»ä¸“ä¸šç”Ÿæˆå™¨ (DepartmentGenerator)

ç”ŸæˆçœŸå®çš„é™¢ç³»å’Œä¸“ä¸šæ•°æ®ï¼š

```python
from generators import DepartmentGenerator

gen = DepartmentGenerator()
departments = gen.generate_departments(10)
majors = gen.generate_majors(departments)
```

**ç‰¹æ€§**ï¼š
- çœŸå®çš„é™¢ç³»åç§°ï¼ˆå¦‚"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢"ï¼‰
- ä¸“ä¸šä¸é™¢ç³»çš„åˆç†åŒ¹é…
- å®Œæ•´çš„é™¢ç³»ä¿¡æ¯ï¼ˆé™¢é•¿ã€è”ç³»æ–¹å¼ã€å»ºç«‹å¹´ä»½ç­‰ï¼‰

### 2. ç”¨æˆ·æ•°æ®ç”Ÿæˆå™¨ (UserGenerator)

ç”Ÿæˆå­¦ç”Ÿå’Œæ•™å¸ˆæ•°æ®ï¼š

```python
from generators import UserGenerator

gen = UserGenerator()
students = gen.generate_students(1000, majors)
teachers = gen.generate_teachers(100, departments)
```

**ç‰¹æ€§**ï¼š
- çœŸå®çš„ä¸­æ–‡å§“å
- åˆç†çš„å¹´é¾„åˆ†å¸ƒ
- å®Œæ•´çš„ä¸ªäººä¿¡æ¯
- å­¦æœ¯èƒŒæ™¯å’ŒèŒä¸šä¿¡æ¯

### 3. è¯¾ç¨‹æ•°æ®ç”Ÿæˆå™¨ (CourseGenerator)

ç”Ÿæˆè¯¾ç¨‹æ•°æ®å’Œå…ˆä¿®å…³ç³»ï¼š

```python
from generators import CourseGenerator

gen = CourseGenerator()
courses = gen.generate_courses(500, departments, teachers)
```

**ç‰¹æ€§**ï¼š
- çœŸå®çš„è¯¾ç¨‹åç§°
- å¤æ‚çš„å…ˆä¿®è¯¾ç¨‹å…³ç³»
- å¤šæ ·çš„è¯¾ç¨‹ç±»å‹å’Œå±æ€§
- åˆç†çš„å­¦åˆ†å’Œå­¦æ—¶åˆ†é…

### 4. è®¾æ–½æ—¶é—´ç”Ÿæˆå™¨ (FacilityGenerator)

ç”Ÿæˆæ•™å®¤å’Œæ—¶é—´æ®µæ•°æ®ï¼š

```python
from generators import FacilityGenerator

gen = FacilityGenerator()
classrooms = gen.generate_classrooms(100)
time_slots = gen.generate_time_slots()
```

**ç‰¹æ€§**ï¼š
- å¤šç§ç±»å‹çš„æ•™å®¤
- è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯
- æ ‡å‡†çš„æ—¶é—´æ®µé…ç½®
- ä½¿ç”¨è§„åˆ™å’Œé™åˆ¶

### 5. å¤æ‚åœºæ™¯ç”Ÿæˆå™¨ (ComplexScenarioGenerator)

ç”Ÿæˆé€‰è¯¾ã€åå¥½å’Œå†²çªæ•°æ®ï¼š

```python
from generators import ComplexScenarioGenerator

gen = ComplexScenarioGenerator()
enrollments = gen.generate_enrollment_data(students, courses)
preferences = gen.generate_teacher_preferences(teachers, time_slots)
conflicts = gen.generate_conflict_scenarios(courses, teachers, classrooms, students)
```

**ç‰¹æ€§**ï¼š
- å¤æ‚çš„é€‰è¯¾åœºæ™¯
- æ•™å¸ˆæ—¶é—´åå¥½
- å¤šç§ç±»å‹çš„å†²çª
- æ’è¯¾çº¦æŸæ¡ä»¶

## ğŸ“‹ æ•°æ®è¡¨ç»“æ„

ç”Ÿæˆçš„æ•°æ®åŒ…å«ä»¥ä¸‹ä¸»è¦è¡¨ï¼š

- **departments**: é™¢ç³»ä¿¡æ¯
- **majors**: ä¸“ä¸šä¿¡æ¯
- **students**: å­¦ç”Ÿä¿¡æ¯
- **teachers**: æ•™å¸ˆä¿¡æ¯
- **courses**: è¯¾ç¨‹ä¿¡æ¯
- **classrooms**: æ•™å®¤ä¿¡æ¯
- **time_slots**: æ—¶é—´æ®µä¿¡æ¯
- **enrollments**: é€‰è¯¾è®°å½•
- **teacher_preferences**: æ•™å¸ˆåå¥½
- **conflicts**: å†²çªåœºæ™¯

è¯¦ç»†çš„å­—æ®µè¯´æ˜è¯·å‚è€ƒå„ç”Ÿæˆå™¨çš„ä»£ç æ³¨é‡Šã€‚

## ğŸ§ª æµ‹è¯•

### è¿è¡Œå•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
python -m pytest tests/test_generators.py

# è¿è¡Œæ•°æ®è´¨é‡æµ‹è¯•
python -m pytest tests/test_data_quality.py -v

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
python -m pytest tests/ --cov=generators --cov-report=html
```

### æµ‹è¯•ç±»å‹

1. **åŠŸèƒ½æµ‹è¯•** (`test_generators.py`)
   - å„ç”Ÿæˆå™¨çš„åŸºæœ¬åŠŸèƒ½
   - æ•°æ®æ ¼å¼æ­£ç¡®æ€§
   - å¤–é”®å…³ç³»å®Œæ•´æ€§

2. **æ•°æ®è´¨é‡æµ‹è¯•** (`test_data_quality.py`)
   - æ•°æ®å®Œæ•´æ€§éªŒè¯
   - ä¸šåŠ¡é€»è¾‘æ­£ç¡®æ€§
   - æ•°æ®åˆ†å¸ƒåˆç†æ€§
   - ä¸­æ–‡å†…å®¹è´¨é‡

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç”Ÿæˆé€Ÿåº¦ä¼˜åŒ–

```python
# è·³è¿‡éªŒè¯ä»¥æé«˜é€Ÿåº¦
dataset = generate_complete_dataset(
    scale='large',
    validate_data=False
)

# ä¸ç”Ÿæˆå†²çªæ•°æ®ä»¥å‡å°‘è®¡ç®—
dataset = generate_complete_dataset(
    scale='large',
    include_conflicts=False
)
```

### å†…å­˜ä¼˜åŒ–

å¯¹äºå¤§è§„æ¨¡æ•°æ®ç”Ÿæˆï¼Œå»ºè®®ï¼š

1. åˆ†æ‰¹å¤„ç†æ•°æ®
2. åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å˜é‡
3. ä½¿ç”¨ç”Ÿæˆå™¨è€Œéåˆ—è¡¨

## ğŸ” æ•°æ®éªŒè¯

æ•°æ®ç”Ÿæˆå™¨åŒ…å«å®Œæ•´çš„éªŒè¯æœºåˆ¶ï¼š

### éªŒè¯ç±»å‹

1. **å¿…éœ€å­—æ®µéªŒè¯**: ç¡®ä¿å…³é”®å­—æ®µä¸ä¸ºç©º
2. **å¤–é”®å®Œæ•´æ€§**: éªŒè¯è¡¨é—´å…³ç³»æ­£ç¡®
3. **æ•°æ®ç±»å‹éªŒè¯**: æ£€æŸ¥å­—æ®µç±»å‹æ­£ç¡®
4. **ä¸šåŠ¡é€»è¾‘éªŒè¯**: éªŒè¯ä¸šåŠ¡è§„åˆ™

### éªŒè¯ç¤ºä¾‹

```python
from generators import DataExporter

exporter = DataExporter()
errors = exporter.validate_data_integrity(dataset)

if errors:
    for table, error_list in errors.items():
        print(f"{table}: {len(error_list)} ä¸ªé”™è¯¯")
else:
    print("æ•°æ®éªŒè¯é€šè¿‡ï¼")
```

## ğŸ“Š æ•°æ®æŠ¥å‘Š

ç”Ÿæˆå™¨ä¼šè‡ªåŠ¨åˆ›å»ºè¯¦ç»†çš„æ•°æ®è´¨é‡æŠ¥å‘Šï¼š

```markdown
# æ•°æ®ç”ŸæˆæŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2024-08-14 15:30:00

## æ•°æ®ç»Ÿè®¡
- **departments**: 20 æ¡è®°å½•
- **majors**: 80 æ¡è®°å½•
- **students**: 25,000 æ¡è®°å½•
- **teachers**: 1,500 æ¡è®°å½•
- **courses**: 3,000 æ¡è®°å½•

**æ€»è®¡**: 29,600 æ¡è®°å½•

## æ•°æ®è´¨é‡
âœ… æ•°æ®éªŒè¯é€šè¿‡ï¼Œæœªå‘ç°é—®é¢˜

## æ•°æ®ç‰¹å¾
### å¸ˆç”Ÿæ¯”ä¾‹
- å­¦ç”Ÿæ€»æ•°: 25,000
- æ•™å¸ˆæ€»æ•°: 1,500
- å¸ˆç”Ÿæ¯”: 1:16.7

### è¯¾ç¨‹åˆ†å¸ƒ
- å¿…ä¿®: 1,200 é—¨ (40.0%)
- é€‰ä¿®: 900 é—¨ (30.0%)
- é™é€‰: 600 é—¨ (20.0%)
- é€šè¯†: 300 é—¨ (10.0%)
```

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ•°æ®è§„æ¨¡

ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼š

```python
DATA_SCALE_CONFIG = {
    'custom': {
        'students': 50000,
        'teachers': 3000,
        'courses': 5000,
        'classrooms': 500,
        'departments': 30,
        'majors': 120,
        # ...
    }
}
```

### è‡ªå®šä¹‰é™¢ç³»ä¸“ä¸š

ä¿®æ”¹ `DEPARTMENT_CONFIG`ï¼š

```python
DEPARTMENT_CONFIG = {
    'templates': [
        "äººå·¥æ™ºèƒ½å­¦é™¢",
        "å¤§æ•°æ®å­¦é™¢",
        # æ·»åŠ æ›´å¤šé™¢ç³»...
    ],
    'major_mapping': {
        "äººå·¥æ™ºèƒ½å­¦é™¢": [
            "äººå·¥æ™ºèƒ½", "æœºå™¨å­¦ä¹ ", "æ·±åº¦å­¦ä¹ "
        ],
        # æ·»åŠ æ›´å¤šæ˜ å°„...
    }
}
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆé€Ÿåº¦å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ

A: å¯ä»¥å°è¯•ä»¥ä¸‹ä¼˜åŒ–ï¼š
- ä½¿ç”¨ `--no-validate` è·³è¿‡éªŒè¯
- ä½¿ç”¨ `--no-conflicts` è·³è¿‡å†²çªç”Ÿæˆ
- é€‰æ‹©è¾ƒå°çš„æ•°æ®è§„æ¨¡

### Q: å†…å­˜ä¸è¶³æ€ä¹ˆåŠï¼Ÿ

A: å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼š
- åˆ†æ‰¹ç”Ÿæˆå’Œå¤„ç†
- åŠæ—¶å¯¼å‡ºæ•°æ®å¹¶æ¸…ç†å†…å­˜
- è€ƒè™‘ä½¿ç”¨æ•°æ®åº“ç›´æ¥å†™å…¥

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æ•°æ®ç±»å‹ï¼Ÿ

A:
1. åœ¨ç›¸åº”çš„ç”Ÿæˆå™¨ä¸­æ·»åŠ æ–°æ–¹æ³•
2. æ›´æ–°é…ç½®æ–‡ä»¶
3. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°å¯¼å‡ºå™¨çš„è¡¨ç»“æ„å®šä¹‰

### Q: ç”Ÿæˆçš„æ•°æ®ä¸å¤ŸçœŸå®æ€ä¹ˆåŠï¼Ÿ

A: å¯ä»¥ï¼š
- æ›´æ–° `fixtures/` ç›®å½•ä¸­çš„æ¨¡æ¿æ•°æ®
- è°ƒæ•´ç”Ÿæˆå™¨ä¸­çš„æƒé‡å’Œæ¦‚ç‡
- æ·»åŠ æ›´å¤šçš„çœŸå®æ•°æ®æº

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç”Ÿæˆå™¨

1. åœ¨ `generators/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿åŸºç¡€ç”Ÿæˆå™¨ç±»ï¼ˆå¦‚æœæœ‰ï¼‰
3. å®ç°å¿…è¦çš„ç”Ÿæˆæ–¹æ³•
4. æ›´æ–° `generators/__init__.py`
5. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### ä»£ç è§„èŒƒ

- éµå¾ª PEP 8 ä»£ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æ³¨è§£
- ç¼–å†™è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

---

**æ³¨æ„**: æœ¬æ•°æ®ç”Ÿæˆå™¨ä»…ç”¨äºæµ‹è¯•ç›®çš„ï¼Œç”Ÿæˆçš„æ•°æ®ä¸ºæ¨¡æ‹Ÿæ•°æ®ï¼Œä¸ä»£è¡¨çœŸå®çš„ä¸ªäººä¿¡æ¯ã€‚
