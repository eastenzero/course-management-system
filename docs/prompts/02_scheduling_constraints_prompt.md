# 提示词：大学排课硬/软约束与权重（供算法与评审使用）

- 硬约束（必须满足）
  - 教师唯一：同一学期、同一日、同一 `TimeSlot`，同一教师仅能教授一门课（`Schedule` 唯一约束）。
  - 教室唯一：同一学期、同一日、同一 `TimeSlot`，同一教室仅能用于一门课（`Schedule` 唯一约束）。
  - 教师必须属于课程的 `teachers` 集合。
  - 教室容量 ≥ 课程 `max_students`。
  - 仅工作日：`day_of_week ∈ [1..5]`，不使用周末。
  - 仅 2 小时时段：选择 `duration_minutes≈120` 且 `is_active=true` 的 `TimeSlot`。
  - 每门课每周节次上限 2；每门课单日最多 1 节；避免同日连续节次。
  - 默认周次范围：`week_range = '1-18'`（可按校历调整）。

- 软约束（尽量满足，违反只降低评分）
  - 时间段均衡：同一 `time_slot` 被使用次数越多，评分越低（鼓励分散到不同时段）。
  - 教师日负载均衡：教师在同一天的授课次数越多，后续分配越降权（默认阈值 3，可调整）。
  - 课程类型偏好：`lecture` 偏好大容量教室；`lab` 偏好实验室/机房。
  - 中午时间规避（可选）：可开启 `avoid_noon=true`，降低 12:00±1h 的时段评分。

- 可调参数（示例默认）
  - `TERM_WEEKS = 18`，`SESSION_DURATION_HOURS = 2`。
  - `sessions_per_week_cap = 2`，`max_daily_sessions_per_course = 1`。
  - `teacher_same_day_penalty = 8`（每额外 1 节同日授课，-8 分）。
  - `time_slot_usage_penalty = 2.0`（同一 `time_slot` 每被占用一次，-2 分）。
  - `teacher_day_load_limit = 3`（跨课程层面软限制，≥3 则不再选）。

- 输出要求（用于算法或评审）
  - 给出一个“评分函数”文字描述或伪代码，体现上述权重如何叠加/扣减。
  - 列出当约束不足以覆盖所有课程时的“放宽顺序”（先放宽教室偏好、再放宽时段偏好；不放宽工作日限制）。
  - 指出需要的统计报表：成功率、失败原因、教师负载、教室利用率、时间段分布等。
