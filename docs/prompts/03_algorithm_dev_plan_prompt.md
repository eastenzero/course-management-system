# 提示词：排课算法开发计划（阶段目标与任务清单）

- 阶段 1：基线可用（已完成，可复述以校准）
  - 贪心算法 `SchedulingAlgorithm`：可用槽初始化（仅工作日、活动的 2 小时时段、可用教室）；冲突检查；评分选槽；部分失败记录；结果落库。
  - 约束：教师/教室唯一、教师属于课程、容量校验、每门课每周≤2、单日≤1、避免连续、时间段均衡与教师日负载惩罚。

- 阶段 2：可配置化与观测性
  - 将参数提到配置层（环境变量/系统设置表）：`sessions_per_week_cap`、`teacher_same_day_penalty`、`time_slot_usage_penalty`、`teacher_day_load_limit`、`TERM_WEEKS` 等。
  - 增加日志与统计：为每次自动排课产出 JSON 结果与 CSV 报表（失败原因、分布统计）。
  - 在 `auto_schedule` API 中返回更多可观测信息（已部分实现）。

- 阶段 3：冲突再求解与微调
  - 对失败的约束执行二次求解：在不触及“仅工作日”与“2 小时时段”的前提下，逐步放宽偏好（教室→时段→星期内位置）。
  - 引入启发式交换：对评分较差/冲突边缘的课程进行槽位交换，提升总体评分。

- 阶段 4：性能与扩展
  - 大规模数据（课程 500+、教室 200+、教师 300+）下的时间与内存评估，必要时引入批量/分块求解。
  - 可选：遗传/混合算法版本（`algorithm_type=genetic/hybrid`）作为对比基线。

- 任务清单（DoD）
  - 配置化：新增配置读取与默认值；文档更新。
  - 观测性：结构化日志、统计 API 扩展、导出报表。
  - 再求解：实现 `_attempt_conflict_resolution` 的可调策略；对比前后成功率。
  - 单元/集成测试：覆盖评分函数、唯一性约束、边界条件（容量不足、教师缺失、资源稀缺）。
  - 基准测试：给出不同规模数据的运行时间、成功率曲线。

- 输出要求
  - 以“任务卡”格式给出工程任务（文件/类/函数名、修改点、验收标准）。
  - 给出一个“配置示例”与“日志样例”。
